import{S as gn,C as J,M as b,a as de,D as fe,G as v,b as yn,N as fn,g as ve,s as vn,L as le,c as bn,H as Pn,T as Mn,d as P,e as j,O as be,f as p,F as Sn,h as xn,i as jt,j as Yt,B as Ln,R as Cn,V as Gn,P as ee,k as y,l as _,m as kn,n as It,I as En,o as Rn,p as Fn,q as Tn,W as An,r as On,t as Wn,u as qe,E as _e,v as zn}from"./vendor-fIYiphtj.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const jn=document.querySelector("canvas.webgl"),r=new gn,z={width:window.innerWidth,height:window.innerHeight},te=new J(13145664),ne=new J(16746496),f=new J(33413),x={neutraBeige:"#D9D4C5",sageGreen:"#A8B79A",warmGray:"#A9A39B",terracotta:"#C67650",paleSkyBlue:"#9EB8C2",oliveBrown:"#5A5A44",sunlitSand:"#E5C69F",mutedTeal:"#6E8D90",charcoalGray:"#4A4A4A"},ue=new b({color:ne,opacity:0,transparent:!0,roughness:.5,metalness:.1}),Bt=new de({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:fe}),Yn=new de({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:fe}),In=new de({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:fe}),Bn=new de({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:fe}),Hn=new de({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:fe}),q=new v;r.add(q);function Ht(e,t,n){const o=new Wn(.5,32),i=new p(o,Bt);i.position.set(e,t,-2),i.scale.set(.2,.2,.2),q.add(i)}const Dn=-1.25,Xn=-1.05,Dt=-.26,Xt=.24;for(let e=0;e<3;e++)Ht(Dt+e*Xt,Dn);for(let e=3;e<5;e++)Ht(Dt+(e-3)*Xt+.13,Xn);const K=q.children[0];K.material=Bt;const Q=q.children[3];Q.material=Yn;const L=q.children[1];L.material=In;const C=q.children[4];C.material=Bn;const G=q.children[2];G.material=Hn;const qn=[K,Q,L,C,G],u=new yn({oscillator:{type:"sawtooth"},filter:{type:"lowpass",frequency:2e3,rolloff:-12,Q:1},filterEnvelope:{attack:.1,decay:.2,sustain:.5,release:1,baseFrequency:200,octaves:3},envelope:{attack:.01,decay:.1,sustain:.9,release:.5}}).toDestination(),w=new fn().toDestination();u.volume.value=ve(0);u.oscillator.type="sine";u.envelope.attack=.05;u.envelope.sustain=.4;u.envelope.release=.2;w.envelope.attack=.05;w.envelope.sustain=.2;w.envelope.release=.2;window.addEventListener("click",()=>{vn(),console.log("Audio Context Started")});let ot=!1,it=!1,st=!1,at=!1,rt=!1;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(qn);if(t.length>0){Tt=!0;const n=t[0].object;n===K?(ot=!0,u.triggerAttack("D3"),w.triggerAttack(),V=.2,K.material.color.set(x.paleSkyBlue),K.material.opacity=.9):n===Q?(it=!0,u.triggerAttack("F#3"),w.triggerAttack(),V=.3,Q.material.color.set(x.paleSkyBlue),Q.material.opacity=.9):n===L?(st=!0,u.triggerAttack("G3"),w.triggerAttack(),V=.5,L.material.color.set(x.paleSkyBlue),L.material.opacity=.9):n===C?(at=!0,u.triggerAttack("A3"),w.triggerAttack(),V=.6,C.material.color.set(x.paleSkyBlue),C.material.opacity=.9):n===G&&(rt=!0,u.triggerAttack("C4"),w.triggerAttack(),V=.8,G.material.color.set(x.paleSkyBlue),G.material.opacity=.9)}});window.addEventListener("mouseup",e=>{Tt=!1,ot?(u.triggerRelease(),w.triggerRelease(),K.material.color.set(f),K.material.opacity=.25,ot=!1):it?(u.triggerRelease(),w.triggerRelease(),Q.material.color.set(f),Q.material.opacity=.25,it=!1):st?(u.triggerRelease(),w.triggerRelease(),L.material.color.set(f),L.material.opacity=.25,st=!1):at?(u.triggerRelease(),w.triggerRelease(),C.material.color.set(f),C.material.opacity=.25,at=!1):rt&&(u.triggerRelease(),w.triggerRelease(),G.material.color.set(f),G.material.opacity=.25,rt=!1)});const X=!0;window.addEventListener("click",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects([L]);t.length>0&&(t[0].object,X?(loopA.stop(),loopB.stop(),X=!1,L.material.color.set(f),L.material.opacity=.25):(loopA=new le(n=>{u.triggerAttackRelease("F3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new le(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),L.material.color.set(x.paleSkyBlue),L.material.opacity=.9,X=!0))});window.addEventListener("click",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects([C]);t.length>0&&(t[0].object,X?(loopA.stop(),loopB.stop(),X=!1,C.material.color.set(f),C.material.opacity=.25):(loopA=new le(n=>{u.triggerAttackRelease("G3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new le(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),C.material.color.set(x.paleSkyBlue),C.material.opacity=.9,X=!0))});window.addEventListener("click",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects([G]);t.length>0&&(t[0].object,X?(loopA.stop(),loopB.stop(),X=!1,G.material.color.set(f),G.material.opacity=.25):(loopA=new le(n=>{u.triggerAttackRelease("Bb3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new le(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),G.material.color.set(x.paleSkyBlue),G.material.opacity=.9,X=!0))});w.volume.value=ve(0);bn().start();const _n=.5,Nn=new Pn(16777215,te,_n);r.add(Nn);const k=new Mn;k.load("textures/stainedGlassA.png");k.load("textures/OceanWave.jpeg");const Vn=k.load("textures/stainedGlassWaveB.jpg");k.load("textures/stainedGlassD.jpg");k.load("textures/Greydient4A_silk_3.png");const qt=k.load("textures/Greydient4A_texture1_5.jpg"),Zn=k.load("textures/Greydient4B_texture1_6.jpg"),$n=k.load("textures/Greydient4C_texture1_3.jpg");k.load("matcaps/0_export_2.png");const Kn=k.load("matcaps/0_export_6.png");k.load("matcaps/0_export_25.png");const Qn=k.load("matcaps/export_92_blur.png"),Pe=Math.PI*.12,Me=.3,Se=1.5,xe=50,Le=5,Ce=new b({map:Vn,color:16755268,emissive:16729344,emissiveIntensity:.5,transparent:!1,opacity:.7}),_t=new b({color:x.neutraBeige,emissiveIntensity:.2,transparent:!1,opacity:1}),Nt=new P(1,32,32),ht=0,Un=0,gt=15,Vt=10,Y=new j(te,3);Y.position.set(ht,Vt,gt);Y.angle=Pe;Y.penumbra=Me;Y.decay=Se;Y.distance=xe;Y.intensity=Le;r.add(Y);const yt=new be;yt.position.set(ht,Un,gt);r.add(yt);Y.target=yt;const Jn=new P(1,32,32),Ne=new p(Jn,Ce);Ne.position.set(ht,Vt,gt);r.add(Ne);const Ge=0,eo=0,ft=-5,Zt=10,I=new j(te,3);I.position.set(Ge,Zt,ft);I.angle=Pe;I.penumbra=Me;I.decay=Se;I.distance=xe;I.intensity=Le;r.add(I);const vt=new be;vt.position.set(Ge,eo,ft);r.add(vt);I.target=vt;const to=new P(1,32,32),$t=new p(to,Ce);$t.position.set(Ge,Zt,ft);r.add($t);const bt=0,no=0,Kt=-25,oo=10,B=new j(te,3);B.position.set(bt,10,-25);B.angle=Pe;B.penumbra=Me;B.decay=Se;B.distance=xe;B.intensity=Le;r.add(B);const Pt=new be;Pt.position.set(bt,no,Kt);r.add(Pt);B.target=Pt;const io=new P(1,32,32),Mt=new p(io,Ce);Mt.position.set(bt,oo,Kt);r.add(Mt);const E=new j(te,3);E.position.set(0,10,-45);E.angle=Pe;E.penumbra=Me;E.decay=Se;E.distance=xe;E.intensity=Le;r.add(E);const St=new be;St.position.set(0,0,-45);r.add(St);E.target=St;const so=new P(1,32,32),U=new p(so,Ce);U.position.set(0,10,-45);r.add(U);U.visible=!1;const we=new p(Nt,_t);we.position.set(0,10,-45);r.add(we);we.visible=!0;E.intensity=0;const N=new j(te,3);N.position.set(0,10,-65);N.angle=Pe;N.penumbra=Me;N.decay=Se;N.distance=xe;r.add(N);const xt=new be;xt.position.set(0,0,-65);r.add(xt);N.target=xt;const Lt=new p(Nt,Ce);Lt.position.set(0,10,-65);r.add(Lt);N.visible=!0;N.intensity=5;const R=new j(16755251,5);R.position.set(-3,6,20);R.angle=Math.PI/1.5;R.penumbra=.9;R.decay=.2;R.distance=20;R.castShadow=!0;R.shadow.mapSize.width=256;R.shadow.mapSize.height=256;R.intensity=.3;r.add(R);const F=new j(16755251,5);F.position.set(-3,6,0);F.angle=Math.PI/1.7;F.penumbra=.7;F.decay=.2;F.distance=20;F.castShadow=!0;F.shadow.mapSize.width=256;F.shadow.mapSize.height=256;F.intensity=.4;r.add(F);const T=new j(16755251,5);T.position.set(-3,6,-20);T.angle=Math.PI/1.5;T.penumbra=.9;T.decay=.2;T.distance=20;T.castShadow=!0;T.shadow.mapSize.width=256;T.shadow.mapSize.height=256;T.intensity=.3;r.add(T);const A=new j(16755251,5);A.position.set(-3,6,-45);A.angle=Math.PI/1.5;A.penumbra=.9;A.decay=.2;A.distance=20;A.castShadow=!0;A.shadow.mapSize.width=256;A.shadow.mapSize.height=256;A.intensity=.3;r.add(A);const O=new j(16755251,5);O.position.set(-3,6,-64);O.angle=Math.PI/1.5;O.penumbra=.9;O.decay=.2;O.distance=20;O.castShadow=!0;O.shadow.mapSize.width=256;O.shadow.mapSize.height=256;O.intensity=.3;r.add(O);const ao=new J(x.terracotta).lerp(new J(8421504),.001);r.fog=new Sn(ao,20,70);const ro=new J(f).lerp(new J(8421504),.2);r.fog=new xn(ro,.01);const W=new b({color:ne});W.roughness=.4;W.metalness=.1;const Ve=new jt({color:x.terracotta});Ve.matcap=Kn;Ve.roughness=.4;Ve.metalness=.1;const Ct=new jt({color:te});Ct.matcap=Qn;Ct.roughness=.9;Ct.metalness=.1;const At=10,co=150,Qt=new Yt(At,At,co,32,16,!1);Qt.computeVertexNormals();const ze=new de({map:qt,color:x.terracotta,side:Ln}),ke=new p(Qt,ze);ke.rotation.x=Math.PI/2;ke.position.z=-20;ke.receiveShadow=!0;ke.castShadow=!0;r.add(ke);function Ut(e,t,n,o,i,s){const h=new qe,d=1e-5,g=e/s;h.moveTo(-e/2,0);for(let m=0;m<=s;m++){const D=-e/2+m*g,S=Math.sin(m/s*Math.PI*2)*(t/2);m===0?h.lineTo(D,S):h.quadraticCurveTo(D-g/2,S,D,S)}for(let m=s;m>=0;m--){const D=-e/2+m*g,S=Math.sin(m/s*Math.PI*2)*(t/2);h.lineTo(D,S+d)}const M={steps:1,depth:n,bevelEnabled:!0,bevelThickness:o,bevelSize:o,bevelSegments:4},H=new _e(h,M);return H.center(),H}const Jt=1.33,Ee=.665,en=.266,tn=.0665,lo=Ut(Jt,Ee,en,tn,16,64),me=new p(lo,W);me.visible=!0;function nn(e,t,n,o,i){const s=new qe,d=o-1e-5;s.moveTo(0,d),s.lineTo(0,t-d),s.quadraticCurveTo(0,t,d,t),s.lineTo(e-d,t),s.quadraticCurveTo(e,t,e,t-d),s.lineTo(e,d),s.quadraticCurveTo(e,0,e-d,0),s.lineTo(d,0),s.quadraticCurveTo(0,0,0,d);const g=new _e(s,{depth:n-o*2,bevelEnabled:!0,bevelSegments:i*2,steps:1,bevelSize:o,bevelThickness:o,curveSegments:i});return g.center(),g}const po=nn(.8,.8,.8,.05,16),he=new p(po,W);he.visible=!1;function on(e,t,n,o,i){const s=new qe,d=o-1e-5,g=e/2;s.moveTo(-g+d,-t/2),s.lineTo(g-d,-t/2),s.quadraticCurveTo(g,-t/2,g,-t/2+d),s.lineTo(d,t/2-d),s.quadraticCurveTo(0,t/2,-d,t/2-d),s.lineTo(-g,-t/2+d),s.quadraticCurveTo(-g,-t/2,-g+d,-t/2);const M={steps:1,depth:n,bevelEnabled:!0,bevelThickness:o,bevelSize:o,bevelSegments:i},H=new _e(s,M);return H.center(),H}const uo=on(1,.866,.2,.05,4),ge=new p(uo,W);ge.visible=!1;const pe=new v;pe.add(me);pe.add(he);pe.add(ge);pe.position.set(0,0,15);r.add(pe);const wo=16,mo=64,ho=1,go=.866,yo=.2,fo=.05,vo=4,Gt=new b({color:ne,opacity:.5,transparent:!0,roughness:.5,metalness:.1}),bo=Ut(Jt/3,Ee/3,en/3,tn/3,wo,mo),Re=new p(bo,Gt);Re.position.set(0,Ee/2+.65,15);r.add(Re);const Po=on(ho/3,go/3,yo/3,fo/3,vo),Fe=new p(Po,Gt),Mo=nn(.8/3,.8/3,.8/3,.05/3,16),Te=new p(Mo,Gt);r.add(Fe,Te);const So=.7;Fe.position.set(-.7,Ee/2+.5,15);Te.position.set(So,Ee/2+.5,15);Re.visible=!0;Fe.visible=!0;Te.visible=!0;const Ae=new v;Ae.add(Re);Ae.add(Fe);Ae.add(Te);r.add(Ae);let Ot="sine";const c=new Cn,a=new Gn,Wt=[{mesh:Re,shape:"sine"},{mesh:Fe,shape:"pyramid"},{mesh:Te,shape:"cube"}];window.addEventListener("click",e=>{var n;a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects([...Wt.map(o=>o.mesh),Ne]);if(t.length>0){const o=t[0].object,i=(n=Wt.find(s=>s.mesh===o))==null?void 0:n.shape;i&&xo(i)}});function xo(e){e!==Ot&&(me.visible=e==="sine",ge.visible=e==="pyramid",he.visible=e==="cube",e==="sine"?(me.visible=!0,ze.map=qt,u.oscillator.type="sine"):e==="pyramid"?(ge.visible=!0,ze.map=Zn,u.oscillator.type="triangle"):e==="cube"&&(he.visible=!0,ze.map=$n,u.oscillator.type="square"),Ot=e)}const Lo=.15;u.volume.value=ve(Lo);const Oe=new v;r.add(Oe);const je=7,ct=.2,Co=.05,Go=new b({color:ne,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<je;e++){const t=new P(Co,16,16),n=new p(t,Go.clone());n.position.set(1.5,e*ct,15),Oe.add(n)}let $=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Oe.children);t.length>0&&($=t[0].object,$.scale.set(2,2,2))});Y.intensity=1;window.addEventListener("mousemove",e=>{if($){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new ee(new y(0,0,1),-$.position.z),n=new y;c.ray.intersectPlane(t,n);const o=_.clamp(n.y,0,je*ct);$.position.y=o;const i=o/(je*ct);sn(i*100),u.volume.value=ve(i);const s=i*5;Y.intensity=s,$.visible=!0}});window.addEventListener("mouseup",()=>{$=null});function sn(e){const t=Math.round(e/100*je);Oe.children.forEach((n,o)=>{n.material.opacity=o<t?1:.3})}sn(15);const Ze=new v;Ze.add(pe);Ze.add(Ae);Ze.add(Oe);r.add(Ze);const ko=Ge,Eo=0,Ro=-5,ye=new v;r.add(ye);new kn({color:ne,transparent:!0,opacity:.5});const Fo=new It(.02,.02,.02);function To(e){const t=new p(Fo,_t),n=4,o=Math.random()*Math.PI*5,i=Math.acos(2*Math.random()-1);return t.position.set(n*Math.sin(i)*Math.cos(o),n*Math.sin(i)*Math.sin(o),n*Math.cos(i)),t.velocity=new y((Math.random()-.5)*.01,(Math.random()-.5)*.01,(Math.random()-.5)*.01),t}function an(e,t){ye.clear();for(let n=0;n<e;n++)ye.add(To());console.log("Sending grain count to backend:",e)}ye.position.set(ko,Eo,Ro);an(500);const $e=new v;r.add($e);const Ye=7,lt=.2,Ao=.05,Oo=new b({color:ne,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Ye;e++){const t=new P(Ao,16,16),n=new p(t,Oo.clone());n.position.set(Ge+2.5,e*lt,-5),$e.add(n)}let oe=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects($e.children);t.length>0&&(oe=t[0].object,oe.scale.set(2,2,2))});I.intensity=1;window.addEventListener("mousemove",e=>{if(oe){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new ee(new y(0,0,1),-oe.position.z),n=new y;c.ray.intersectPlane(t,n);const o=_.clamp(n.y,0,Ye*lt);oe.position.y=o;const i=o/(Ye*lt);w.volume.value=ve(i),an(i*500),Wo(i*100);const s=i*5;I.intensity=s}});window.addEventListener("mouseup",()=>{oe=null});function Wo(e){const t=Math.round(e/100*Ye);$e.children.forEach((n,o)=>{n.material.opacity=o<t?1:.3})}function zo(e,t,n,o,i){const s=new v,h=new qe;h.moveTo(-2.5/2,0),h.lineTo(e/2,0);const d=_.degToRad(i),g=Math.cos(d)*t,M=-Math.sin(d)*t;h.lineTo(e/2+g,M),h.quadraticCurveTo(e/2,0,-2.5/2,.2);const H={steps:10,depth:n,bevelEnabled:!0,bevelThickness:o*3,bevelSize:o,bevelSegments:32},m=new _e(h,H);m.center();const D=new p(m,W);return s.add(D),s}const jo=2.5,Yo=2,Io=.1,Bo=.2,Ho=30,rn=zo(jo,Yo,Io,Bo,Ho);rn.position.set(0,0,-26);r.add(rn);const Ke=new v;r.add(Ke);const Ie=7,dt=.2,Do=.05,Xo=new b({color:ne,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Ie;e++){const t=new P(Do,16,16),n=new p(t,Xo.clone());n.position.set(1.5,e*dt,-25),Ke.add(n)}let ie=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Ke.children);t.length>0&&(ie=t[0].object,ie.scale.set(2,2,2))});B.intensity=1;window.addEventListener("mousemove",e=>{if(ie){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new ee(new y(0,0,1),-ie.position.z),n=new y;c.ray.intersectPlane(t,n);const o=_.clamp(n.y,0,Ie*dt);ie.position.y=o;const i=o/(Ie*dt);qo(i*100);const s=i*5;B.intensity=s}});window.addEventListener("mouseup",()=>{ie=null});function qo(e){const t=Math.round(e/100*Ie);Ke.children.forEach((n,o)=>{n.material.opacity=o<t?1:.3})}const Qe=new v,_o=25,No=1.5;for(let e=0;e<_o;e++){const t=No+(Math.random()-.5)*.1,n=Math.random()*Math.PI*2;let o;const i=Math.random();i<.33?o=new P(.05*Math.random()+.03,8,8):i<.66?o=new It(.05*Math.random()+.03,.05*Math.random()+.03,.05*Math.random()+.03):o=new En(.05*Math.random()+.03,0);const s=new p(o,W);s.position.set(t*Math.cos(n),t*Math.sin(n),0),s.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),s.userData={initialPosition:s.position.clone(),scale:1},Qe.add(s)}Qe.position.set(0,0,-45);r.add(Qe);const Vo=new Yt(2,2,.1,32),Zo=new b({opacity:0,transparent:!0}),cn=new p(Vo,Zo);cn.rotation.x=Math.PI/2;cn.position.z=-45;function $o(){const e=Date.now()*.001;Qe.children.forEach(t=>{const{initialPosition:n,scale:o}=t.userData;t.position.x=n.x+Math.sin(e+t.id)*.1,t.position.y=n.y+Math.cos(e+t.id)*.1,t.scale.set(o,o,o)})}const Ko=new Rn;Ko.load("fonts/P22 FLLW Exhibition_Regular.json",function(e){function t(mn,hn){return new zn(mn,{font:hn,size:11,height:2,curveSegments:12,bevelEnabled:!0,bevelThickness:.1,bevelSize:.5,bevelOffset:0,bevelSegments:5})}const n=t("A",e);t("D",e),t("S",e),t("R",e),new Fn,new p(n,Ve);const o=.08,i=t("OSC",e),s=new p(i,ue);s.position.set(-2.7,8,18.4),s.scale.set(o,o,o),s.rotation.x=Math.PI/2,s.castShadow=!0,s.receiveShadow=!0,s.transparent=!0,r.add(s),R.target=Ne;const h=t("Noise",e),d=new p(h,ue);d.position.set(-3.2,8,-1.6),d.scale.set(o,o,o),d.rotation.x=Math.PI/2,d.castShadow=!0,d.transparent=!0,r.add(d),F.target=d;const g=t("Filter",e),M=new p(g,ue);M.position.set(-2.9,8,-21.6),M.scale.set(o,o,o),M.rotation.x=Math.PI/2,M.castShadow=!0,M.transparent=!0,r.add(M),T.target=Mt;const H=t("LFO",e),m=new p(H,ue);m.position.set(-2.8,7.5,-44.3),m.scale.set(o,o,o),m.rotation.x=Math.PI/2,m.castShadow=!0,m.transparent=!0,r.add(m),A.target=U;const D=t("adsr",e),S=new p(D,ue);S.position.set(-3.5,7.7,-63.7),S.scale.set(o,o,o),S.rotation.x=Math.PI/2,S.castShadow=!0,S.transparent=!0,r.add(S),O.target=Lt});const Ue=new v;r.add(Ue);const Be=10,pt=.2,Qo=.05,Uo=new b({color:W,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Be;e++){const t=new P(Qo,16,16),n=new p(t,Uo.clone());n.position.set(-3,e*pt,-65),Ue.add(n)}let se=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Ue.children);t.length>0&&(se=t[0].object,se.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(se){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new ee(new y(0,0,1),-se.position.z),n=new y;c.ray.intersectPlane(t,n);const o=_.clamp(n.y,0,Be*pt);se.position.y=o;const i=o/(Be*pt);console.log(`Volume Level: ${i.toFixed(2)}`),u.envelope.attack=i,w.envelope.attack=i,ln(i*100)}});window.addEventListener("mouseup",()=>{se=null});function ln(e){const t=Math.round(e/100*Be);Ue.children.forEach((n,o)=>{o<t?n.material.opacity=1:n.material.opacity=.3})}ln(10);const Je=new v;r.add(Je);const He=10,ut=.2,Jo=.05,ei=new b({color:W,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<He;e++){const t=new P(Jo,16,16),n=new p(t,ei.clone());n.position.set(-1,e*ut,-65),Je.add(n)}let ae=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Je.children);t.length>0&&(ae=t[0].object,ae.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(ae){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new ee(new y(0,0,1),-ae.position.z),n=new y;c.ray.intersectPlane(t,n);const o=_.clamp(n.y,0,He*ut);ae.position.y=o;const i=o/(He*ut);u.envelope.decay=i,w.envelope.decay=i,console.log(`Decay Level: ${i.toFixed(2)}`),dn(i*100)}});window.addEventListener("mouseup",()=>{ae=null});function dn(e){const t=Math.round(e/100*He);Je.children.forEach((n,o)=>{o<t?n.material.opacity=1:n.material.opacity=.3})}dn(10);const et=new v;r.add(et);const De=10,wt=.2,ti=.05,ni=new b({color:W,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<De;e++){const t=new P(ti,16,16),n=new p(t,ni.clone());n.position.set(1,e*wt,-65),et.add(n)}let re=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(et.children);t.length>0&&(re=t[0].object,re.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(re){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new ee(new y(0,0,1),-re.position.z),n=new y;c.ray.intersectPlane(t,n);const o=_.clamp(n.y,0,De*wt);re.position.y=o;const i=o/(De*wt);u.envelope.sustain=i,w.envelope.sustain=i,pn(i*100)}});window.addEventListener("mouseup",()=>{re=null});function pn(e){const t=Math.round(e/100*De);et.children.forEach((n,o)=>{o<t?n.material.opacity=1:n.material.opacity=.3})}pn(10);const tt=new v;r.add(tt);const Xe=10,mt=.2,oi=.05,ii=new b({color:W,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Xe;e++){const t=new P(oi,16,16),n=new p(t,ii.clone());n.position.set(3,e*mt,-65),tt.add(n)}let ce=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(tt.children);t.length>0&&(ce=t[0].object,ce.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(ce){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new ee(new y(0,0,1),-ce.position.z),n=new y;c.ray.intersectPlane(t,n);const o=_.clamp(n.y,0,Xe*mt);ce.position.y=o;const i=o/(Xe*mt);u.envelope.release=i,w.envelope.release=i,un(i*100)}});window.addEventListener("mouseup",()=>{ce=null});function un(e){const t=Math.round(e/100*Xe);tt.children.forEach((n,o)=>{o<t?n.material.opacity=1:n.material.opacity=.3})}un(10);const l=new Tn(75,z.width/z.height);l.position.set(0,0,45);r.add(l);const Z=new An({canvas:jn,antialias:!0});Z.setSize(z.width,z.height);Z.shadowMap.enabled=!0;Z.shadowMap.type=On;Z.setPixelRatio(Math.min(window.devicePixelRatio,1));Z.setPixelRatio(Math.min(window.devicePixelRatio,1));let kt=!1,Et=!1,Rt=!1,Ft=!1;const si=.2,zt=.02;window.addEventListener("keydown",e=>{switch(e.preventDefault(),e.key.toLowerCase()){case"w":kt=!0;break;case"s":Et=!0;break;case"a":Rt=!0;break;case"d":Ft=!0;break}});window.addEventListener("keyup",e=>{switch(e.key.toLowerCase()){case"w":kt=!1;break;case"s":Et=!1;break;case"a":Rt=!1;break;case"d":Ft=!1;break}});let nt=!1;window.addEventListener("click",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l),c.intersectObject(U).length>0&&(U.visible=!U.visible,we.visible=!we.visible,nt?(E.intensity=0,nt=!1):(E.intensity=Le,nt=!0))});let V=.5,Tt=!1;const We={minZ:-85,maxZ:45,radius:9.5};function wn(){requestAnimationFrame(wn),$o(),q.position.copy(l.position),q.quaternion.copy(l.quaternion),Rt&&(l.rotation.y+=zt),Ft&&(l.rotation.y-=zt);const e=new y;l.getWorldDirection(e),kt&&l.position.add(e.multiplyScalar(si)),Et&&l.position.add(e.multiplyScalar(-.2)),l.position.z=_.clamp(l.position.z,We.minZ,We.maxZ);const t=Math.sqrt(l.position.x**2+l.position.y**2);if(t>We.radius){const n=We.radius/t;l.position.x*=n,l.position.y*=n}ye.children.forEach(n=>{n.position.add(n.velocity);const o=1.25;n.position.length()>o&&(n.position.normalize().multiplyScalar(o),n.velocity.negate()),n.material.opacity=3}),Tt&&(me.rotation.y+=V,ge.rotation.y+=V,he.rotation.y+=V),Z.render(r,l)}wn();window.addEventListener("resize",()=>{z.width=window.innerWidth,z.height=window.innerHeight,l.aspect=z.width/z.height,l.updateProjectionMatrix(),Z.setSize(z.width,z.height),Z.setPixelRatio(Math.min(window.devicePixelRatio,2))});
