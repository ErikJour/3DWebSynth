import{S as pn,C as Q,M as b,a as ce,D as we,G as P,b as un,N as wn,g as me,s as mn,L as re,c as hn,H as gn,T as yn,d as M,e as j,O as he,f as p,F as fn,h as vn,i as Wt,j as Ot,B as Pn,R as bn,V as Mn,P as U,k as y,l as I,m as Sn,n as zt,I as xn,o as Ln,p as Cn,q as Gn,W as kn,r as En,t as Rn,u as De,E as Xe,v as Fn}from"./vendor-fIYiphtj.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Tn=document.querySelector("canvas.webgl"),r=new pn,z={width:window.innerWidth,height:window.innerHeight},J=new Q(13145664),ee=new Q(16746496),v=new Q(33413),f={neutraBeige:"#D9D4C5",sageGreen:"#A8B79A",warmGray:"#A9A39B",terracotta:"#C67650",paleSkyBlue:"#9EB8C2",oliveBrown:"#5A5A44",sunlitSand:"#E5C69F",mutedTeal:"#6E8D90",charcoalGray:"#4A4A4A"},de=new b({color:ee,opacity:0,transparent:!0,roughness:.5,metalness:.1}),jt=new ce({color:v,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:we}),An=new ce({color:v,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:we}),Wn=new ce({color:v,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:we}),On=new ce({color:v,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:we}),zn=new ce({color:v,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:we}),H=new P;r.add(H);function Yt(e,t,n){const o=new Rn(.5,32),i=new p(o,jt);i.position.set(e,t,-2),i.scale.set(.2,.2,.2),H.add(i)}const jn=-1.25,Yn=-1.05,Bt=-.26,Ht=.24;for(let e=0;e<3;e++)Yt(Bt+e*Ht,jn);for(let e=3;e<5;e++)Yt(Bt+(e-3)*Ht+.13,Yn);const Z=H.children[0];Z.material=jt;const $=H.children[3];$.material=An;const L=H.children[1];L.material=Wn;const C=H.children[4];C.material=On;const G=H.children[2];G.material=zn;const Bn=[Z,$,L,C,G],u=new un({oscillator:{type:"sawtooth"},filter:{type:"lowpass",frequency:2e3,rolloff:-12,Q:1},filterEnvelope:{attack:.1,decay:.2,sustain:.5,release:1,baseFrequency:200,octaves:3},envelope:{attack:.01,decay:.1,sustain:.9,release:.5}}).toDestination(),w=new wn().toDestination();u.volume.value=me(0);u.oscillator.type="sine";u.envelope.attack=.05;u.envelope.release=.2;window.addEventListener("click",()=>{mn(),console.log("Audio Context Started")});let tt=!1,nt=!1,ot=!1,it=!1,st=!1;window.addEventListener("mousedown",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects(Bn);if(t.length>0){const n=t[0].object;n===Z?(tt=!0,u.triggerAttack("D3"),w.triggerAttack(),Z.material.color.set(f.paleSkyBlue),Z.material.opacity=.9):n===$?(nt=!0,u.triggerAttack("F#3"),w.triggerAttack(),$.material.color.set(f.paleSkyBlue),$.material.opacity=.9):n===L?(ot=!0,u.triggerAttack("G3"),w.triggerAttack(),L.material.color.set(f.paleSkyBlue),L.material.opacity=.9):n===C?(it=!0,u.triggerAttack("A3"),w.triggerAttack(),C.material.color.set(f.paleSkyBlue),C.material.opacity=.9):n===G&&(st=!0,u.triggerAttack("C4"),w.triggerAttack(),G.material.color.set(f.paleSkyBlue),G.material.opacity=.9)}});window.addEventListener("mouseup",e=>{tt?(u.triggerRelease(),w.triggerRelease(),Z.material.color.set(v),Z.material.opacity=.25,tt=!1):nt?(u.triggerRelease(),w.triggerRelease(),$.material.color.set(v),$.material.opacity=.25,nt=!1):ot?(u.triggerRelease(),w.triggerRelease(),L.material.color.set(v),L.material.opacity=.25,ot=!1):it?(u.triggerRelease(),w.triggerRelease(),C.material.color.set(v),C.material.opacity=.25,it=!1):st&&(u.triggerRelease(),w.triggerRelease(),G.material.color.set(v),G.material.opacity=.25,st=!1)});window.addEventListener("click",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects([L]);t.length>0&&(t[0].object,isPlaying?(loopA.stop(),loopB.stop(),isPlaying=!1,L.material.color.set(v),L.material.opacity=.25):(loopA=new re(n=>{u.triggerAttackRelease("F3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new re(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),L.material.color.set(f.paleSkyBlue),L.material.opacity=.9,isPlaying=!0))});window.addEventListener("click",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects([C]);t.length>0&&(t[0].object,isPlaying?(loopA.stop(),loopB.stop(),isPlaying=!1,C.material.color.set(v),C.material.opacity=.25):(loopA=new re(n=>{u.triggerAttackRelease("G3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new re(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),C.material.color.set(f.paleSkyBlue),C.material.opacity=.9,isPlaying=!0))});window.addEventListener("click",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects([G]);t.length>0&&(t[0].object,isPlaying?(loopA.stop(),loopB.stop(),isPlaying=!1,G.material.color.set(v),G.material.opacity=.25):(loopA=new re(n=>{u.triggerAttackRelease("Bb3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new re(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),G.material.color.set(f.paleSkyBlue),G.material.opacity=.9,isPlaying=!0))});w.volume.value=me(0);hn().start();const Hn=.5,In=new gn(16777215,J,Hn);r.add(In);const k=new yn;k.load("textures/stainedGlassA.png");k.load("textures/OceanWave.jpeg");const Dn=k.load("textures/stainedGlassWaveB.jpg");k.load("textures/stainedGlassD.jpg");k.load("textures/Greydient4A_silk_3.png");const Xn=k.load("textures/Greydient4A_texture1_5.jpg");k.load("textures/Greydient4B_texture1_6.jpg");k.load("textures/Greydient4C_texture1_3.jpg");k.load("matcaps/0_export_2.png");const qn=k.load("matcaps/0_export_6.png");k.load("matcaps/0_export_25.png");const _n=k.load("matcaps/export_92_blur.png"),ge=Math.PI*.12,ye=.3,fe=1.5,ve=50,Pe=5,be=new b({map:Dn,color:16755268,emissive:16729344,emissiveIntensity:.5,transparent:!1,opacity:.7}),It=new b({color:f.neutraBeige,emissiveIntensity:.2,transparent:!1,opacity:1}),Dt=new M(1,32,32),wt=0,Nn=0,mt=15,Xt=10,q=new j(J,3);q.position.set(wt,Xt,mt);q.angle=ge;q.penumbra=ye;q.decay=fe;q.distance=ve;q.intensity=Pe;r.add(q);const ht=new he;ht.position.set(wt,Nn,mt);r.add(ht);q.target=ht;const Vn=new M(1,32,32),qe=new p(Vn,be);qe.position.set(wt,Xt,mt);r.add(qe);const Me=0,Zn=0,gt=-5,qt=10,_=new j(J,3);_.position.set(Me,qt,gt);_.angle=ge;_.penumbra=ye;_.decay=fe;_.distance=ve;_.intensity=Pe;r.add(_);const yt=new he;yt.position.set(Me,Zn,gt);r.add(yt);_.target=yt;const $n=new M(1,32,32),_t=new p($n,be);_t.position.set(Me,qt,gt);r.add(_t);const ft=0,Kn=0,Nt=-25,Qn=10,N=new j(J,3);N.position.set(ft,10,-25);N.angle=ge;N.penumbra=ye;N.decay=fe;N.distance=ve;N.intensity=Pe;r.add(N);const vt=new he;vt.position.set(ft,Kn,Nt);r.add(vt);N.target=vt;const Un=new M(1,32,32),Pt=new p(Un,be);Pt.position.set(ft,Qn,Nt);r.add(Pt);const E=new j(J,3);E.position.set(0,10,-45);E.angle=ge;E.penumbra=ye;E.decay=fe;E.distance=ve;E.intensity=Pe;r.add(E);const bt=new he;bt.position.set(0,0,-45);r.add(bt);E.target=bt;const Jn=new M(1,32,32),K=new p(Jn,be);K.position.set(0,10,-45);r.add(K);K.visible=!1;const pe=new p(Dt,It);pe.position.set(0,10,-45);r.add(pe);pe.visible=!0;E.intensity=0;const D=new j(J,3);D.position.set(0,10,-65);D.angle=ge;D.penumbra=ye;D.decay=fe;D.distance=ve;r.add(D);const Mt=new he;Mt.position.set(0,0,-65);r.add(Mt);D.target=Mt;const St=new p(Dt,be);St.position.set(0,10,-65);r.add(St);D.visible=!0;D.intensity=5;const R=new j(16755251,5);R.position.set(-3,6,20);R.angle=Math.PI/1.5;R.penumbra=.9;R.decay=.2;R.distance=20;R.castShadow=!0;R.shadow.mapSize.width=256;R.shadow.mapSize.height=256;R.intensity=.3;r.add(R);const F=new j(16755251,5);F.position.set(-3,6,0);F.angle=Math.PI/1.7;F.penumbra=.7;F.decay=.2;F.distance=20;F.castShadow=!0;F.shadow.mapSize.width=256;F.shadow.mapSize.height=256;F.intensity=.4;r.add(F);const T=new j(16755251,5);T.position.set(-3,6,-20);T.angle=Math.PI/1.5;T.penumbra=.9;T.decay=.2;T.distance=20;T.castShadow=!0;T.shadow.mapSize.width=256;T.shadow.mapSize.height=256;T.intensity=.3;r.add(T);const A=new j(16755251,5);A.position.set(-3,6,-45);A.angle=Math.PI/1.5;A.penumbra=.9;A.decay=.2;A.distance=20;A.castShadow=!0;A.shadow.mapSize.width=256;A.shadow.mapSize.height=256;A.intensity=.3;r.add(A);const W=new j(16755251,5);W.position.set(-3,6,-64);W.angle=Math.PI/1.5;W.penumbra=.9;W.decay=.2;W.distance=20;W.castShadow=!0;W.shadow.mapSize.width=256;W.shadow.mapSize.height=256;W.intensity=.3;r.add(W);const eo=new Q(f.terracotta).lerp(new Q(8421504),.001);r.fog=new fn(eo,20,70);const to=new Q(v).lerp(new Q(8421504),.2);r.fog=new vn(to,.01);const O=new b({color:ee});O.roughness=.4;O.metalness=.1;const _e=new Wt({color:f.terracotta});_e.matcap=qn;_e.roughness=.4;_e.metalness=.1;const xt=new Wt({color:J});xt.matcap=_n;xt.roughness=.9;xt.metalness=.1;const Rt=10,no=150,Vt=new Ot(Rt,Rt,no,32,16,!1);Vt.computeVertexNormals();const Fe=new ce({map:Xn,color:f.terracotta,side:Pn}),Se=new p(Vt,Fe);Se.rotation.x=Math.PI/2;Se.position.z=-20;Se.receiveShadow=!0;Se.castShadow=!0;r.add(Se);function Zt(e,t,n,o,i,a){const h=new De,d=1e-5,g=e/a;h.moveTo(-e/2,0);for(let m=0;m<=a;m++){const B=-e/2+m*g,x=Math.sin(m/a*Math.PI*2)*(t/2);m===0?h.lineTo(B,x):h.quadraticCurveTo(B-g/2,x,B,x)}for(let m=a;m>=0;m--){const B=-e/2+m*g,x=Math.sin(m/a*Math.PI*2)*(t/2);h.lineTo(B,x+d)}const S={steps:1,depth:n,bevelEnabled:!0,bevelThickness:o,bevelSize:o,bevelSegments:4},Y=new Xe(h,S);return Y.center(),Y}const $t=1.33,xe=.665,Kt=.266,Qt=.0665,oo=Zt($t,xe,Kt,Qt,16,64),Te=new p(oo,O);Te.visible=!0;function Ut(e,t,n,o,i){const a=new De,d=o-1e-5;a.moveTo(0,d),a.lineTo(0,t-d),a.quadraticCurveTo(0,t,d,t),a.lineTo(e-d,t),a.quadraticCurveTo(e,t,e,t-d),a.lineTo(e,d),a.quadraticCurveTo(e,0,e-d,0),a.lineTo(d,0),a.quadraticCurveTo(0,0,0,d);const g=new Xe(a,{depth:n-o*2,bevelEnabled:!0,bevelSegments:i*2,steps:1,bevelSize:o,bevelThickness:o,curveSegments:i});return g.center(),g}const io=Ut(.8,.8,.8,.05,16),Ae=new p(io,O);Ae.visible=!1;function Jt(e,t,n,o,i){const a=new De,d=o-1e-5,g=e/2;a.moveTo(-g+d,-t/2),a.lineTo(g-d,-t/2),a.quadraticCurveTo(g,-t/2,g,-t/2+d),a.lineTo(d,t/2-d),a.quadraticCurveTo(0,t/2,-d,t/2-d),a.lineTo(-g,-t/2+d),a.quadraticCurveTo(-g,-t/2,-g+d,-t/2);const S={steps:1,depth:n,bevelEnabled:!0,bevelThickness:o,bevelSize:o,bevelSegments:i},Y=new Xe(a,S);return Y.center(),Y}const so=Jt(1,.866,.2,.05,4),We=new p(so,O);We.visible=!1;const le=new P;le.add(Te);le.add(Ae);le.add(We);le.position.set(0,0,15);r.add(le);const ao=16,ro=64,co=1,lo=.866,po=.2,uo=.05,wo=4,Lt=new b({color:ee,opacity:.5,transparent:!0,roughness:.5,metalness:.1}),mo=Zt($t/3,xe/3,Kt/3,Qt/3,ao,ro),Le=new p(mo,Lt);Le.position.set(0,xe/2+.65,15);r.add(Le);const ho=Jt(co/3,lo/3,po/3,uo/3,wo),Ce=new p(ho,Lt),go=Ut(.8/3,.8/3,.8/3,.05/3,16),Ge=new p(go,Lt);r.add(Ce,Ge);const yo=.7;Ce.position.set(-.7,xe/2+.5,15);Ge.position.set(yo,xe/2+.5,15);Le.visible=!0;Ce.visible=!0;Ge.visible=!0;const ke=new P;ke.add(Le);ke.add(Ce);ke.add(Ge);r.add(ke);let Ft="sine";const c=new bn,s=new Mn,Tt=[{mesh:Le,shape:"sine"},{mesh:Ce,shape:"pyramid"},{mesh:Ge,shape:"cube"}];window.addEventListener("click",e=>{var n;s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects([...Tt.map(o=>o.mesh),qe]);if(t.length>0){const o=t[0].object,i=(n=Tt.find(a=>a.mesh===o))==null?void 0:n.shape;i&&fo(i)}});function fo(e){e!==Ft&&(Te.visible=e==="sine",We.visible=e==="pyramid",Ae.visible=e==="cube",e==="sine"?(Te.visible=!0,Fe.color.set(f.terracotta),u.oscillator.type="sine"):e==="pyramid"?(We.visible=!0,Fe.color.set(f.mutedTeal),u.oscillator.type="triangle"):e==="cube"&&(Ae.visible=!0,Fe.color.set(f.sunlitSand),u.oscillator.type="square"),Ft=e)}const vo=.15;u.volume.value=me(vo);const Ee=new P;r.add(Ee);const Oe=7,at=.2,Po=.05,bo=new b({color:ee,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Oe;e++){const t=new M(Po,16,16),n=new p(t,bo.clone());n.position.set(1.5,e*at,15),Ee.add(n)}let V=null;window.addEventListener("mousedown",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects(Ee.children);t.length>0&&(V=t[0].object,V.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(V){s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=new U(new y(0,0,1),-V.position.z),n=new y;c.ray.intersectPlane(t,n);const o=I.clamp(n.y,0,Oe*at);V.position.y=o;const i=o/(Oe*at);en(i*100),u.volume.value=me(i),V.visible=!0}});window.addEventListener("mouseup",()=>{V=null});function en(e){const t=Math.round(e/100*Oe);Ee.children.forEach((n,o)=>{n.material.opacity=o<t?1:.3})}en(15);const Ne=new P;Ne.add(le);Ne.add(ke);Ne.add(Ee);r.add(Ne);const Mo=Me,So=0,xo=-5,ue=new P;r.add(ue);new Sn({color:ee,transparent:!0,opacity:.5});const Lo=new zt(.02,.02,.02);function Co(e){const t=new p(Lo,It),n=4,o=Math.random()*Math.PI*5,i=Math.acos(2*Math.random()-1);return t.position.set(n*Math.sin(i)*Math.cos(o),n*Math.sin(i)*Math.sin(o),n*Math.cos(i)),t.velocity=new y((Math.random()-.5)*.01,(Math.random()-.5)*.01,(Math.random()-.5)*.01),t}function Go(e,t){ue.clear();for(let n=0;n<e;n++)ue.add(Co());console.log("Sending grain count to backend:",e)}ue.position.set(Mo,So,xo);Go(500);const Ve=new P;r.add(Ve);const ze=7,rt=.2,ko=.05,Eo=new b({color:ee,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<ze;e++){const t=new M(ko,16,16),n=new p(t,Eo.clone());n.position.set(Me+2.5,e*rt,-5),Ve.add(n)}let te=null;window.addEventListener("mousedown",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects(Ve.children);t.length>0&&(te=t[0].object,te.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(te){s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=new U(new y(0,0,1),-te.position.z),n=new y;c.ray.intersectPlane(t,n);const o=I.clamp(n.y,0,ze*rt);te.position.y=o;const i=o/(ze*rt);w.volume.value=me(i),Ro(i*100)}});window.addEventListener("mouseup",()=>{te=null});function Ro(e){const t=Math.round(e/100*ze);Ve.children.forEach((n,o)=>{n.material.opacity=o<t?1:.3})}function Fo(e,t,n,o,i){const a=new P,h=new De;h.moveTo(-2.5/2,0),h.lineTo(e/2,0);const d=I.degToRad(i),g=Math.cos(d)*t,S=-Math.sin(d)*t;h.lineTo(e/2+g,S),h.quadraticCurveTo(e/2,0,-2.5/2,.2);const Y={steps:10,depth:n,bevelEnabled:!0,bevelThickness:o*3,bevelSize:o,bevelSegments:32},m=new Xe(h,Y);m.center();const B=new p(m,O);return a.add(B),a}const To=2.5,Ao=2,Wo=.1,Oo=.2,zo=30,tn=Fo(To,Ao,Wo,Oo,zo);tn.position.set(0,0,-26);r.add(tn);const Ze=new P;r.add(Ze);const je=7,ct=.2,jo=.05,Yo=new b({color:ee,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<je;e++){const t=new M(jo,16,16),n=new p(t,Yo.clone());n.position.set(1.5,e*ct,-25),Ze.add(n)}let ne=null;window.addEventListener("mousedown",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects(Ze.children);t.length>0&&(ne=t[0].object,ne.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(ne){s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=new U(new y(0,0,1),-ne.position.z),n=new y;c.ray.intersectPlane(t,n);const o=I.clamp(n.y,0,je*ct);ne.position.y=o;const i=o/(je*ct);Bo(i*100)}});window.addEventListener("mouseup",()=>{ne=null});function Bo(e){const t=Math.round(e/100*je);Ze.children.forEach((n,o)=>{n.material.opacity=o<t?1:.3})}const $e=new P,Ho=25,Io=1.5;for(let e=0;e<Ho;e++){const t=Io+(Math.random()-.5)*.1,n=Math.random()*Math.PI*2;let o;const i=Math.random();i<.33?o=new M(.05*Math.random()+.03,8,8):i<.66?o=new zt(.05*Math.random()+.03,.05*Math.random()+.03,.05*Math.random()+.03):o=new xn(.05*Math.random()+.03,0);const a=new p(o,O);a.position.set(t*Math.cos(n),t*Math.sin(n),0),a.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),a.userData={initialPosition:a.position.clone(),scale:1},$e.add(a)}$e.position.set(0,0,-45);r.add($e);const Do=new Ot(2,2,.1,32),Xo=new b({opacity:0,transparent:!0}),nn=new p(Do,Xo);nn.rotation.x=Math.PI/2;nn.position.z=-45;function qo(){const e=Date.now()*.001;$e.children.forEach(t=>{const{initialPosition:n,scale:o}=t.userData;t.position.x=n.x+Math.sin(e+t.id)*.1,t.position.y=n.y+Math.cos(e+t.id)*.1,t.scale.set(o,o,o)})}const _o=new Ln;_o.load("fonts/P22 FLLW Exhibition_Regular.json",function(e){function t(ln,dn){return new Fn(ln,{font:dn,size:11,height:2,curveSegments:12,bevelEnabled:!0,bevelThickness:.1,bevelSize:.5,bevelOffset:0,bevelSegments:5})}const n=t("A",e);t("D",e),t("S",e),t("R",e),new Cn,new p(n,_e);const o=.08,i=t("OSC",e),a=new p(i,de);a.position.set(-2.7,8,18.4),a.scale.set(o,o,o),a.rotation.x=Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,a.transparent=!0,r.add(a),R.target=qe;const h=t("Noise",e),d=new p(h,de);d.position.set(-3.2,8,-1.6),d.scale.set(o,o,o),d.rotation.x=Math.PI/2,d.castShadow=!0,d.transparent=!0,r.add(d),F.target=d;const g=t("Filter",e),S=new p(g,de);S.position.set(-2.9,8,-21.6),S.scale.set(o,o,o),S.rotation.x=Math.PI/2,S.castShadow=!0,S.transparent=!0,r.add(S),T.target=Pt;const Y=t("LFO",e),m=new p(Y,de);m.position.set(-2.8,7.5,-44.3),m.scale.set(o,o,o),m.rotation.x=Math.PI/2,m.castShadow=!0,m.transparent=!0,r.add(m),A.target=K;const B=t("adsr",e),x=new p(B,de);x.position.set(-3.5,7.7,-63.7),x.scale.set(o,o,o),x.rotation.x=Math.PI/2,x.castShadow=!0,x.transparent=!0,r.add(x),W.target=St});const Ke=new P;r.add(Ke);const Ye=10,lt=.2,No=.05,Vo=new b({color:O,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Ye;e++){const t=new M(No,16,16),n=new p(t,Vo.clone());n.position.set(-3,e*lt,-65),Ke.add(n)}let oe=null;window.addEventListener("mousedown",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects(Ke.children);t.length>0&&(oe=t[0].object,oe.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(oe){s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=new U(new y(0,0,1),-oe.position.z),n=new y;c.ray.intersectPlane(t,n);const o=I.clamp(n.y,0,Ye*lt);oe.position.y=o;const i=o/(Ye*lt);console.log(`Volume Level: ${i.toFixed(2)}`),u.envelope.attack=i,w.envelope.attack=i,on(i*100)}});window.addEventListener("mouseup",()=>{oe=null});function on(e){const t=Math.round(e/100*Ye);Ke.children.forEach((n,o)=>{o<t?n.material.opacity=1:n.material.opacity=.3})}on(10);const Qe=new P;r.add(Qe);const Be=10,dt=.2,Zo=.05,$o=new b({color:O,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Be;e++){const t=new M(Zo,16,16),n=new p(t,$o.clone());n.position.set(-1,e*dt,-65),Qe.add(n)}let ie=null;window.addEventListener("mousedown",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects(Qe.children);t.length>0&&(ie=t[0].object,ie.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(ie){s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=new U(new y(0,0,1),-ie.position.z),n=new y;c.ray.intersectPlane(t,n);const o=I.clamp(n.y,0,Be*dt);ie.position.y=o;const i=o/(Be*dt);u.envelope.decay=i,w.envelope.decay=i,console.log(`Decay Level: ${i.toFixed(2)}`),sn(i*100)}});window.addEventListener("mouseup",()=>{ie=null});function sn(e){const t=Math.round(e/100*Be);Qe.children.forEach((n,o)=>{o<t?n.material.opacity=1:n.material.opacity=.3})}sn(10);const Ue=new P;r.add(Ue);const He=10,pt=.2,Ko=.05,Qo=new b({color:O,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<He;e++){const t=new M(Ko,16,16),n=new p(t,Qo.clone());n.position.set(1,e*pt,-65),Ue.add(n)}let se=null;window.addEventListener("mousedown",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects(Ue.children);t.length>0&&(se=t[0].object,se.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(se){s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=new U(new y(0,0,1),-se.position.z),n=new y;c.ray.intersectPlane(t,n);const o=I.clamp(n.y,0,He*pt);se.position.y=o;const i=o/(He*pt);u.envelope.sustain=i,w.envelope.sustain=i,an(i*100)}});window.addEventListener("mouseup",()=>{se=null});function an(e){const t=Math.round(e/100*He);Ue.children.forEach((n,o)=>{o<t?n.material.opacity=1:n.material.opacity=.3})}an(10);const Je=new P;r.add(Je);const Ie=10,ut=.2,Uo=.05,Jo=new b({color:O,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Ie;e++){const t=new M(Uo,16,16),n=new p(t,Jo.clone());n.position.set(3,e*ut,-65),Je.add(n)}let ae=null;window.addEventListener("mousedown",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=c.intersectObjects(Je.children);t.length>0&&(ae=t[0].object,ae.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(ae){s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l);const t=new U(new y(0,0,1),-ae.position.z),n=new y;c.ray.intersectPlane(t,n);const o=I.clamp(n.y,0,Ie*ut);ae.position.y=o;const i=o/(Ie*ut);u.envelope.release=i,w.envelope.release=i,rn(i*100)}});window.addEventListener("mouseup",()=>{ae=null});function rn(e){const t=Math.round(e/100*Ie);Je.children.forEach((n,o)=>{o<t?n.material.opacity=1:n.material.opacity=.3})}rn(10);const l=new Gn(75,z.width/z.height);l.position.set(0,0,45);r.add(l);const X=new kn({canvas:Tn,antialias:!0});X.setSize(z.width,z.height);X.shadowMap.enabled=!0;X.shadowMap.type=En;X.setPixelRatio(Math.min(window.devicePixelRatio,1));X.setPixelRatio(Math.min(window.devicePixelRatio,1));let Ct=!1,Gt=!1,kt=!1,Et=!1;const ei=.2,At=.02;window.addEventListener("keydown",e=>{switch(e.preventDefault(),e.key.toLowerCase()){case"w":Ct=!0;break;case"s":Gt=!0;break;case"a":kt=!0;break;case"d":Et=!0;break}});window.addEventListener("keyup",e=>{switch(e.key.toLowerCase()){case"w":Ct=!1;break;case"s":Gt=!1;break;case"a":kt=!1;break;case"d":Et=!1;break}});let et=!1;window.addEventListener("click",e=>{s.x=e.clientX/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(s,l),c.intersectObject(K).length>0&&(K.visible=!K.visible,pe.visible=!pe.visible,et?(E.intensity=0,et=!1):(E.intensity=Pe,et=!0))});const Re={minZ:-85,maxZ:45,radius:9.5};function cn(){requestAnimationFrame(cn),qo(),H.position.copy(l.position),H.quaternion.copy(l.quaternion),kt&&(l.rotation.y+=At),Et&&(l.rotation.y-=At);const e=new y;l.getWorldDirection(e),Ct&&l.position.add(e.multiplyScalar(ei)),Gt&&l.position.add(e.multiplyScalar(-.2)),l.position.z=I.clamp(l.position.z,Re.minZ,Re.maxZ);const t=Math.sqrt(l.position.x**2+l.position.y**2);if(t>Re.radius){const n=Re.radius/t;l.position.x*=n,l.position.y*=n}ue.children.forEach(n=>{n.position.add(n.velocity);const o=1.25;n.position.length()>o&&(n.position.normalize().multiplyScalar(o),n.velocity.negate()),n.material.opacity=3}),X.render(r,l)}cn();window.addEventListener("resize",()=>{z.width=window.innerWidth,z.height=window.innerHeight,l.aspect=z.width/z.height,l.updateProjectionMatrix(),X.setSize(z.width,z.height),X.setPixelRatio(Math.min(window.devicePixelRatio,2))});
