import{S as hn,C as U,M as P,a as le,D as ye,G as v,b as gn,N as yn,g as fe,s as fn,L as ce,c as vn,H as Pn,T as bn,d as b,e as j,O as ve,f as p,F as Mn,h as Sn,i as zt,j as jt,B as xn,R as Ln,V as Cn,P as J,k as y,l as q,m as Gn,n as Yt,I as kn,o as En,p as Rn,q as Fn,W as Tn,r as An,t as On,u as Xe,E as qe,v as Wn}from"./vendor-fIYiphtj.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const zn=document.querySelector("canvas.webgl"),r=new hn,z={width:window.innerWidth,height:window.innerHeight},ee=new U(13145664),te=new U(16746496),f=new U(33413),x={neutraBeige:"#D9D4C5",sageGreen:"#A8B79A",warmGray:"#A9A39B",terracotta:"#C67650",paleSkyBlue:"#9EB8C2",oliveBrown:"#5A5A44",sunlitSand:"#E5C69F",mutedTeal:"#6E8D90",charcoalGray:"#4A4A4A"},pe=new P({color:te,opacity:0,transparent:!0,roughness:.5,metalness:.1}),It=new le({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:ye}),jn=new le({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:ye}),Yn=new le({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:ye}),In=new le({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:ye}),Bn=new le({color:f,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:ye}),X=new v;r.add(X);function Bt(e,t,n){const i=new On(.5,32),o=new p(i,It);o.position.set(e,t,-2),o.scale.set(.2,.2,.2),X.add(o)}const Hn=-1.25,Dn=-1.05,Ht=-.26,Dt=.24;for(let e=0;e<3;e++)Bt(Ht+e*Dt,Hn);for(let e=3;e<5;e++)Bt(Ht+(e-3)*Dt+.13,Dn);const $=X.children[0];$.material=It;const K=X.children[3];K.material=jn;const L=X.children[1];L.material=Yn;const C=X.children[4];C.material=In;const G=X.children[2];G.material=Bn;const Xn=[$,K,L,C,G],u=new gn({oscillator:{type:"sawtooth"},filter:{type:"lowpass",frequency:2e3,rolloff:-12,Q:1},filterEnvelope:{attack:.1,decay:.2,sustain:.5,release:1,baseFrequency:200,octaves:3},envelope:{attack:.01,decay:.1,sustain:.9,release:.5}}).toDestination(),w=new yn().toDestination();u.volume.value=fe(0);u.oscillator.type="sine";u.envelope.attack=.05;u.envelope.sustain=.4;u.envelope.release=.2;w.envelope.attack=.05;w.envelope.sustain=.2;w.envelope.release=.2;window.addEventListener("click",()=>{fn(),console.log("Audio Context Started")});let nt=!1,it=!1,ot=!1,st=!1,at=!1;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Xn);if(t.length>0){Ft=!0;const n=t[0].object;n===$?(nt=!0,u.triggerAttack("D3"),w.triggerAttack(),N=.2,$.material.color.set(x.paleSkyBlue),$.material.opacity=.9):n===K?(it=!0,u.triggerAttack("F#3"),w.triggerAttack(),N=.3,K.material.color.set(x.paleSkyBlue),K.material.opacity=.9):n===L?(ot=!0,u.triggerAttack("G3"),w.triggerAttack(),N=.5,L.material.color.set(x.paleSkyBlue),L.material.opacity=.9):n===C?(st=!0,u.triggerAttack("A3"),w.triggerAttack(),N=.6,C.material.color.set(x.paleSkyBlue),C.material.opacity=.9):n===G&&(at=!0,u.triggerAttack("C4"),w.triggerAttack(),N=.8,G.material.color.set(x.paleSkyBlue),G.material.opacity=.9)}});window.addEventListener("mouseup",e=>{Ft=!1,nt?(u.triggerRelease(),w.triggerRelease(),$.material.color.set(f),$.material.opacity=.25,nt=!1):it?(u.triggerRelease(),w.triggerRelease(),K.material.color.set(f),K.material.opacity=.25,it=!1):ot?(u.triggerRelease(),w.triggerRelease(),L.material.color.set(f),L.material.opacity=.25,ot=!1):st?(u.triggerRelease(),w.triggerRelease(),C.material.color.set(f),C.material.opacity=.25,st=!1):at&&(u.triggerRelease(),w.triggerRelease(),G.material.color.set(f),G.material.opacity=.25,at=!1)});window.addEventListener("click",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects([L]);t.length>0&&(t[0].object,isPlaying?(loopA.stop(),loopB.stop(),isPlaying=!1,L.material.color.set(f),L.material.opacity=.25):(loopA=new ce(n=>{u.triggerAttackRelease("F3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new ce(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),L.material.color.set(x.paleSkyBlue),L.material.opacity=.9,isPlaying=!0))});window.addEventListener("click",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects([C]);t.length>0&&(t[0].object,isPlaying?(loopA.stop(),loopB.stop(),isPlaying=!1,C.material.color.set(f),C.material.opacity=.25):(loopA=new ce(n=>{u.triggerAttackRelease("G3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new ce(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),C.material.color.set(x.paleSkyBlue),C.material.opacity=.9,isPlaying=!0))});window.addEventListener("click",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects([G]);t.length>0&&(t[0].object,isPlaying?(loopA.stop(),loopB.stop(),isPlaying=!1,G.material.color.set(f),G.material.opacity=.25):(loopA=new ce(n=>{u.triggerAttackRelease("Bb3","8n",n),w.triggerAttackRelease("8n",n)},"4n").start(0),loopB=new ce(n=>{w.triggerAttackRelease("2n",n)},"4n").start("8n"),G.material.color.set(x.paleSkyBlue),G.material.opacity=.9,isPlaying=!0))});w.volume.value=fe(0);vn().start();const qn=.5,_n=new Pn(16777215,ee,qn);r.add(_n);const k=new bn;k.load("textures/stainedGlassA.png");k.load("textures/OceanWave.jpeg");const Nn=k.load("textures/stainedGlassWaveB.jpg");k.load("textures/stainedGlassD.jpg");k.load("textures/Greydient4A_silk_3.png");const Xt=k.load("textures/Greydient4A_texture1_5.jpg"),Vn=k.load("textures/Greydient4B_texture1_6.jpg"),Zn=k.load("textures/Greydient4C_texture1_3.jpg");k.load("matcaps/0_export_2.png");const $n=k.load("matcaps/0_export_6.png");k.load("matcaps/0_export_25.png");const Kn=k.load("matcaps/export_92_blur.png"),Pe=Math.PI*.12,be=.3,Me=1.5,Se=50,xe=5,Le=new P({map:Nn,color:16755268,emissive:16729344,emissiveIntensity:.5,transparent:!1,opacity:.7}),qt=new P({color:x.neutraBeige,emissiveIntensity:.2,transparent:!1,opacity:1}),_t=new b(1,32,32),mt=0,Qn=0,ht=15,Nt=10,Y=new j(ee,3);Y.position.set(mt,Nt,ht);Y.angle=Pe;Y.penumbra=be;Y.decay=Me;Y.distance=Se;Y.intensity=xe;r.add(Y);const gt=new ve;gt.position.set(mt,Qn,ht);r.add(gt);Y.target=gt;const Un=new b(1,32,32),_e=new p(Un,Le);_e.position.set(mt,Nt,ht);r.add(_e);const Ce=0,Jn=0,yt=-5,Vt=10,I=new j(ee,3);I.position.set(Ce,Vt,yt);I.angle=Pe;I.penumbra=be;I.decay=Me;I.distance=Se;I.intensity=xe;r.add(I);const ft=new ve;ft.position.set(Ce,Jn,yt);r.add(ft);I.target=ft;const ei=new b(1,32,32),Zt=new p(ei,Le);Zt.position.set(Ce,Vt,yt);r.add(Zt);const vt=0,ti=0,$t=-25,ni=10,B=new j(ee,3);B.position.set(vt,10,-25);B.angle=Pe;B.penumbra=be;B.decay=Me;B.distance=Se;B.intensity=xe;r.add(B);const Pt=new ve;Pt.position.set(vt,ti,$t);r.add(Pt);B.target=Pt;const ii=new b(1,32,32),bt=new p(ii,Le);bt.position.set(vt,ni,$t);r.add(bt);const E=new j(ee,3);E.position.set(0,10,-45);E.angle=Pe;E.penumbra=be;E.decay=Me;E.distance=Se;E.intensity=xe;r.add(E);const Mt=new ve;Mt.position.set(0,0,-45);r.add(Mt);E.target=Mt;const oi=new b(1,32,32),Q=new p(oi,Le);Q.position.set(0,10,-45);r.add(Q);Q.visible=!1;const ue=new p(_t,qt);ue.position.set(0,10,-45);r.add(ue);ue.visible=!0;E.intensity=0;const _=new j(ee,3);_.position.set(0,10,-65);_.angle=Pe;_.penumbra=be;_.decay=Me;_.distance=Se;r.add(_);const St=new ve;St.position.set(0,0,-65);r.add(St);_.target=St;const xt=new p(_t,Le);xt.position.set(0,10,-65);r.add(xt);_.visible=!0;_.intensity=5;const R=new j(16755251,5);R.position.set(-3,6,20);R.angle=Math.PI/1.5;R.penumbra=.9;R.decay=.2;R.distance=20;R.castShadow=!0;R.shadow.mapSize.width=256;R.shadow.mapSize.height=256;R.intensity=.3;r.add(R);const F=new j(16755251,5);F.position.set(-3,6,0);F.angle=Math.PI/1.7;F.penumbra=.7;F.decay=.2;F.distance=20;F.castShadow=!0;F.shadow.mapSize.width=256;F.shadow.mapSize.height=256;F.intensity=.4;r.add(F);const T=new j(16755251,5);T.position.set(-3,6,-20);T.angle=Math.PI/1.5;T.penumbra=.9;T.decay=.2;T.distance=20;T.castShadow=!0;T.shadow.mapSize.width=256;T.shadow.mapSize.height=256;T.intensity=.3;r.add(T);const A=new j(16755251,5);A.position.set(-3,6,-45);A.angle=Math.PI/1.5;A.penumbra=.9;A.decay=.2;A.distance=20;A.castShadow=!0;A.shadow.mapSize.width=256;A.shadow.mapSize.height=256;A.intensity=.3;r.add(A);const O=new j(16755251,5);O.position.set(-3,6,-64);O.angle=Math.PI/1.5;O.penumbra=.9;O.decay=.2;O.distance=20;O.castShadow=!0;O.shadow.mapSize.width=256;O.shadow.mapSize.height=256;O.intensity=.3;r.add(O);const si=new U(x.terracotta).lerp(new U(8421504),.001);r.fog=new Mn(si,20,70);const ai=new U(f).lerp(new U(8421504),.2);r.fog=new Sn(ai,.01);const W=new P({color:te});W.roughness=.4;W.metalness=.1;const Ne=new zt({color:x.terracotta});Ne.matcap=$n;Ne.roughness=.4;Ne.metalness=.1;const Lt=new zt({color:ee});Lt.matcap=Kn;Lt.roughness=.9;Lt.metalness=.1;const Tt=10,ri=150,Kt=new jt(Tt,Tt,ri,32,16,!1);Kt.computeVertexNormals();const We=new le({map:Xt,color:x.terracotta,side:xn}),Ge=new p(Kt,We);Ge.rotation.x=Math.PI/2;Ge.position.z=-20;Ge.receiveShadow=!0;Ge.castShadow=!0;r.add(Ge);function Qt(e,t,n,i,o,s){const h=new Xe,d=1e-5,g=e/s;h.moveTo(-e/2,0);for(let m=0;m<=s;m++){const D=-e/2+m*g,S=Math.sin(m/s*Math.PI*2)*(t/2);m===0?h.lineTo(D,S):h.quadraticCurveTo(D-g/2,S,D,S)}for(let m=s;m>=0;m--){const D=-e/2+m*g,S=Math.sin(m/s*Math.PI*2)*(t/2);h.lineTo(D,S+d)}const M={steps:1,depth:n,bevelEnabled:!0,bevelThickness:i,bevelSize:i,bevelSegments:4},H=new qe(h,M);return H.center(),H}const Ut=1.33,ke=.665,Jt=.266,en=.0665,ci=Qt(Ut,ke,Jt,en,16,64),we=new p(ci,W);we.visible=!0;function tn(e,t,n,i,o){const s=new Xe,d=i-1e-5;s.moveTo(0,d),s.lineTo(0,t-d),s.quadraticCurveTo(0,t,d,t),s.lineTo(e-d,t),s.quadraticCurveTo(e,t,e,t-d),s.lineTo(e,d),s.quadraticCurveTo(e,0,e-d,0),s.lineTo(d,0),s.quadraticCurveTo(0,0,0,d);const g=new qe(s,{depth:n-i*2,bevelEnabled:!0,bevelSegments:o*2,steps:1,bevelSize:i,bevelThickness:i,curveSegments:o});return g.center(),g}const li=tn(.8,.8,.8,.05,16),me=new p(li,W);me.visible=!1;function nn(e,t,n,i,o){const s=new Xe,d=i-1e-5,g=e/2;s.moveTo(-g+d,-t/2),s.lineTo(g-d,-t/2),s.quadraticCurveTo(g,-t/2,g,-t/2+d),s.lineTo(d,t/2-d),s.quadraticCurveTo(0,t/2,-d,t/2-d),s.lineTo(-g,-t/2+d),s.quadraticCurveTo(-g,-t/2,-g+d,-t/2);const M={steps:1,depth:n,bevelEnabled:!0,bevelThickness:i,bevelSize:i,bevelSegments:o},H=new qe(s,M);return H.center(),H}const di=nn(1,.866,.2,.05,4),he=new p(di,W);he.visible=!1;const de=new v;de.add(we);de.add(me);de.add(he);de.position.set(0,0,15);r.add(de);const pi=16,ui=64,wi=1,mi=.866,hi=.2,gi=.05,yi=4,Ct=new P({color:te,opacity:.5,transparent:!0,roughness:.5,metalness:.1}),fi=Qt(Ut/3,ke/3,Jt/3,en/3,pi,ui),Ee=new p(fi,Ct);Ee.position.set(0,ke/2+.65,15);r.add(Ee);const vi=nn(wi/3,mi/3,hi/3,gi/3,yi),Re=new p(vi,Ct),Pi=tn(.8/3,.8/3,.8/3,.05/3,16),Fe=new p(Pi,Ct);r.add(Re,Fe);const bi=.7;Re.position.set(-.7,ke/2+.5,15);Fe.position.set(bi,ke/2+.5,15);Ee.visible=!0;Re.visible=!0;Fe.visible=!0;const Te=new v;Te.add(Ee);Te.add(Re);Te.add(Fe);r.add(Te);let At="sine";const c=new Ln,a=new Cn,Ot=[{mesh:Ee,shape:"sine"},{mesh:Re,shape:"pyramid"},{mesh:Fe,shape:"cube"}];window.addEventListener("click",e=>{var n;a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects([...Ot.map(i=>i.mesh),_e]);if(t.length>0){const i=t[0].object,o=(n=Ot.find(s=>s.mesh===i))==null?void 0:n.shape;o&&Mi(o)}});function Mi(e){e!==At&&(we.visible=e==="sine",he.visible=e==="pyramid",me.visible=e==="cube",e==="sine"?(we.visible=!0,We.map=Xt,u.oscillator.type="sine"):e==="pyramid"?(he.visible=!0,We.map=Vn,u.oscillator.type="triangle"):e==="cube"&&(me.visible=!0,We.map=Zn,u.oscillator.type="square"),At=e)}const Si=.15;u.volume.value=fe(Si);const Ae=new v;r.add(Ae);const ze=7,rt=.2,xi=.05,Li=new P({color:te,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<ze;e++){const t=new b(xi,16,16),n=new p(t,Li.clone());n.position.set(1.5,e*rt,15),Ae.add(n)}let Z=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Ae.children);t.length>0&&(Z=t[0].object,Z.scale.set(2,2,2))});Y.intensity=1;window.addEventListener("mousemove",e=>{if(Z){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new J(new y(0,0,1),-Z.position.z),n=new y;c.ray.intersectPlane(t,n);const i=q.clamp(n.y,0,ze*rt);Z.position.y=i;const o=i/(ze*rt);on(o*100),u.volume.value=fe(o);const s=o*5;Y.intensity=s,Z.visible=!0}});window.addEventListener("mouseup",()=>{Z=null});function on(e){const t=Math.round(e/100*ze);Ae.children.forEach((n,i)=>{n.material.opacity=i<t?1:.3})}on(15);const Ve=new v;Ve.add(de);Ve.add(Te);Ve.add(Ae);r.add(Ve);const Ci=Ce,Gi=0,ki=-5,ge=new v;r.add(ge);new Gn({color:te,transparent:!0,opacity:.5});const Ei=new Yt(.02,.02,.02);function Ri(e){const t=new p(Ei,qt),n=4,i=Math.random()*Math.PI*5,o=Math.acos(2*Math.random()-1);return t.position.set(n*Math.sin(o)*Math.cos(i),n*Math.sin(o)*Math.sin(i),n*Math.cos(o)),t.velocity=new y((Math.random()-.5)*.01,(Math.random()-.5)*.01,(Math.random()-.5)*.01),t}function sn(e,t){ge.clear();for(let n=0;n<e;n++)ge.add(Ri());console.log("Sending grain count to backend:",e)}ge.position.set(Ci,Gi,ki);sn(500);const Ze=new v;r.add(Ze);const je=7,ct=.2,Fi=.05,Ti=new P({color:te,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<je;e++){const t=new b(Fi,16,16),n=new p(t,Ti.clone());n.position.set(Ce+2.5,e*ct,-5),Ze.add(n)}let ne=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Ze.children);t.length>0&&(ne=t[0].object,ne.scale.set(2,2,2))});I.intensity=1;window.addEventListener("mousemove",e=>{if(ne){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new J(new y(0,0,1),-ne.position.z),n=new y;c.ray.intersectPlane(t,n);const i=q.clamp(n.y,0,je*ct);ne.position.y=i;const o=i/(je*ct);w.volume.value=fe(o),sn(o*500),Ai(o*100);const s=o*5;I.intensity=s}});window.addEventListener("mouseup",()=>{ne=null});function Ai(e){const t=Math.round(e/100*je);Ze.children.forEach((n,i)=>{n.material.opacity=i<t?1:.3})}function Oi(e,t,n,i,o){const s=new v,h=new Xe;h.moveTo(-2.5/2,0),h.lineTo(e/2,0);const d=q.degToRad(o),g=Math.cos(d)*t,M=-Math.sin(d)*t;h.lineTo(e/2+g,M),h.quadraticCurveTo(e/2,0,-2.5/2,.2);const H={steps:10,depth:n,bevelEnabled:!0,bevelThickness:i*3,bevelSize:i,bevelSegments:32},m=new qe(h,H);m.center();const D=new p(m,W);return s.add(D),s}const Wi=2.5,zi=2,ji=.1,Yi=.2,Ii=30,an=Oi(Wi,zi,ji,Yi,Ii);an.position.set(0,0,-26);r.add(an);const $e=new v;r.add($e);const Ye=7,lt=.2,Bi=.05,Hi=new P({color:te,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Ye;e++){const t=new b(Bi,16,16),n=new p(t,Hi.clone());n.position.set(1.5,e*lt,-25),$e.add(n)}let ie=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects($e.children);t.length>0&&(ie=t[0].object,ie.scale.set(2,2,2))});B.intensity=1;window.addEventListener("mousemove",e=>{if(ie){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new J(new y(0,0,1),-ie.position.z),n=new y;c.ray.intersectPlane(t,n);const i=q.clamp(n.y,0,Ye*lt);ie.position.y=i;const o=i/(Ye*lt);Di(o*100);const s=o*5;B.intensity=s}});window.addEventListener("mouseup",()=>{ie=null});function Di(e){const t=Math.round(e/100*Ye);$e.children.forEach((n,i)=>{n.material.opacity=i<t?1:.3})}const Ke=new v,Xi=25,qi=1.5;for(let e=0;e<Xi;e++){const t=qi+(Math.random()-.5)*.1,n=Math.random()*Math.PI*2;let i;const o=Math.random();o<.33?i=new b(.05*Math.random()+.03,8,8):o<.66?i=new Yt(.05*Math.random()+.03,.05*Math.random()+.03,.05*Math.random()+.03):i=new kn(.05*Math.random()+.03,0);const s=new p(i,W);s.position.set(t*Math.cos(n),t*Math.sin(n),0),s.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),s.userData={initialPosition:s.position.clone(),scale:1},Ke.add(s)}Ke.position.set(0,0,-45);r.add(Ke);const _i=new jt(2,2,.1,32),Ni=new P({opacity:0,transparent:!0}),rn=new p(_i,Ni);rn.rotation.x=Math.PI/2;rn.position.z=-45;function Vi(){const e=Date.now()*.001;Ke.children.forEach(t=>{const{initialPosition:n,scale:i}=t.userData;t.position.x=n.x+Math.sin(e+t.id)*.1,t.position.y=n.y+Math.cos(e+t.id)*.1,t.scale.set(i,i,i)})}const Zi=new En;Zi.load("fonts/P22 FLLW Exhibition_Regular.json",function(e){function t(wn,mn){return new Wn(wn,{font:mn,size:11,height:2,curveSegments:12,bevelEnabled:!0,bevelThickness:.1,bevelSize:.5,bevelOffset:0,bevelSegments:5})}const n=t("A",e);t("D",e),t("S",e),t("R",e),new Rn,new p(n,Ne);const i=.08,o=t("OSC",e),s=new p(o,pe);s.position.set(-2.7,8,18.4),s.scale.set(i,i,i),s.rotation.x=Math.PI/2,s.castShadow=!0,s.receiveShadow=!0,s.transparent=!0,r.add(s),R.target=_e;const h=t("Noise",e),d=new p(h,pe);d.position.set(-3.2,8,-1.6),d.scale.set(i,i,i),d.rotation.x=Math.PI/2,d.castShadow=!0,d.transparent=!0,r.add(d),F.target=d;const g=t("Filter",e),M=new p(g,pe);M.position.set(-2.9,8,-21.6),M.scale.set(i,i,i),M.rotation.x=Math.PI/2,M.castShadow=!0,M.transparent=!0,r.add(M),T.target=bt;const H=t("LFO",e),m=new p(H,pe);m.position.set(-2.8,7.5,-44.3),m.scale.set(i,i,i),m.rotation.x=Math.PI/2,m.castShadow=!0,m.transparent=!0,r.add(m),A.target=Q;const D=t("adsr",e),S=new p(D,pe);S.position.set(-3.5,7.7,-63.7),S.scale.set(i,i,i),S.rotation.x=Math.PI/2,S.castShadow=!0,S.transparent=!0,r.add(S),O.target=xt});const Qe=new v;r.add(Qe);const Ie=10,dt=.2,$i=.05,Ki=new P({color:W,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Ie;e++){const t=new b($i,16,16),n=new p(t,Ki.clone());n.position.set(-3,e*dt,-65),Qe.add(n)}let oe=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Qe.children);t.length>0&&(oe=t[0].object,oe.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(oe){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new J(new y(0,0,1),-oe.position.z),n=new y;c.ray.intersectPlane(t,n);const i=q.clamp(n.y,0,Ie*dt);oe.position.y=i;const o=i/(Ie*dt);console.log(`Volume Level: ${o.toFixed(2)}`),u.envelope.attack=o,w.envelope.attack=o,cn(o*100)}});window.addEventListener("mouseup",()=>{oe=null});function cn(e){const t=Math.round(e/100*Ie);Qe.children.forEach((n,i)=>{i<t?n.material.opacity=1:n.material.opacity=.3})}cn(10);const Ue=new v;r.add(Ue);const Be=10,pt=.2,Qi=.05,Ui=new P({color:W,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<Be;e++){const t=new b(Qi,16,16),n=new p(t,Ui.clone());n.position.set(-1,e*pt,-65),Ue.add(n)}let se=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Ue.children);t.length>0&&(se=t[0].object,se.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(se){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new J(new y(0,0,1),-se.position.z),n=new y;c.ray.intersectPlane(t,n);const i=q.clamp(n.y,0,Be*pt);se.position.y=i;const o=i/(Be*pt);u.envelope.decay=o,w.envelope.decay=o,console.log(`Decay Level: ${o.toFixed(2)}`),ln(o*100)}});window.addEventListener("mouseup",()=>{se=null});function ln(e){const t=Math.round(e/100*Be);Ue.children.forEach((n,i)=>{i<t?n.material.opacity=1:n.material.opacity=.3})}ln(10);const Je=new v;r.add(Je);const He=10,ut=.2,Ji=.05,eo=new P({color:W,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<He;e++){const t=new b(Ji,16,16),n=new p(t,eo.clone());n.position.set(1,e*ut,-65),Je.add(n)}let ae=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(Je.children);t.length>0&&(ae=t[0].object,ae.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(ae){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new J(new y(0,0,1),-ae.position.z),n=new y;c.ray.intersectPlane(t,n);const i=q.clamp(n.y,0,He*ut);ae.position.y=i;const o=i/(He*ut);u.envelope.sustain=o,w.envelope.sustain=o,dn(o*100)}});window.addEventListener("mouseup",()=>{ae=null});function dn(e){const t=Math.round(e/100*He);Je.children.forEach((n,i)=>{i<t?n.material.opacity=1:n.material.opacity=.3})}dn(10);const et=new v;r.add(et);const De=10,wt=.2,to=.05,no=new P({color:W,transparent:!0,opacity:.3,roughness:.5,metalness:.1});for(let e=0;e<De;e++){const t=new b(to,16,16),n=new p(t,no.clone());n.position.set(3,e*wt,-65),et.add(n)}let re=null;window.addEventListener("mousedown",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=c.intersectObjects(et.children);t.length>0&&(re=t[0].object,re.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(re){a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l);const t=new J(new y(0,0,1),-re.position.z),n=new y;c.ray.intersectPlane(t,n);const i=q.clamp(n.y,0,De*wt);re.position.y=i;const o=i/(De*wt);u.envelope.release=o,w.envelope.release=o,pn(o*100)}});window.addEventListener("mouseup",()=>{re=null});function pn(e){const t=Math.round(e/100*De);et.children.forEach((n,i)=>{i<t?n.material.opacity=1:n.material.opacity=.3})}pn(10);const l=new Fn(75,z.width/z.height);l.position.set(0,0,45);r.add(l);const V=new Tn({canvas:zn,antialias:!0});V.setSize(z.width,z.height);V.shadowMap.enabled=!0;V.shadowMap.type=An;V.setPixelRatio(Math.min(window.devicePixelRatio,1));V.setPixelRatio(Math.min(window.devicePixelRatio,1));let Gt=!1,kt=!1,Et=!1,Rt=!1;const io=.2,Wt=.02;window.addEventListener("keydown",e=>{switch(e.preventDefault(),e.key.toLowerCase()){case"w":Gt=!0;break;case"s":kt=!0;break;case"a":Et=!0;break;case"d":Rt=!0;break}});window.addEventListener("keyup",e=>{switch(e.key.toLowerCase()){case"w":Gt=!1;break;case"s":kt=!1;break;case"a":Et=!1;break;case"d":Rt=!1;break}});let tt=!1;window.addEventListener("click",e=>{a.x=e.clientX/window.innerWidth*2-1,a.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(a,l),c.intersectObject(Q).length>0&&(Q.visible=!Q.visible,ue.visible=!ue.visible,tt?(E.intensity=0,tt=!1):(E.intensity=xe,tt=!0))});let N=.5,Ft=!1;const Oe={minZ:-85,maxZ:45,radius:9.5};function un(){requestAnimationFrame(un),Vi(),X.position.copy(l.position),X.quaternion.copy(l.quaternion),Et&&(l.rotation.y+=Wt),Rt&&(l.rotation.y-=Wt);const e=new y;l.getWorldDirection(e),Gt&&l.position.add(e.multiplyScalar(io)),kt&&l.position.add(e.multiplyScalar(-.2)),l.position.z=q.clamp(l.position.z,Oe.minZ,Oe.maxZ);const t=Math.sqrt(l.position.x**2+l.position.y**2);if(t>Oe.radius){const n=Oe.radius/t;l.position.x*=n,l.position.y*=n}ge.children.forEach(n=>{n.position.add(n.velocity);const i=1.25;n.position.length()>i&&(n.position.normalize().multiplyScalar(i),n.velocity.negate()),n.material.opacity=3}),Ft&&(we.rotation.y+=N,he.rotation.y+=N,me.rotation.y+=N),V.render(r,l)}un();window.addEventListener("resize",()=>{z.width=window.innerWidth,z.height=window.innerHeight,l.aspect=z.width/z.height,l.updateProjectionMatrix(),V.setSize(z.width,z.height),V.setPixelRatio(Math.min(window.devicePixelRatio,2))});
